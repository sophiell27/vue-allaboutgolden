import{f as i}from"./frontStore-297e3c18.js";import{m as g,a as f,_ as x,r as b,o,c as a,b as t,F as C,g as y,t as l,h as u,d as $,w as v}from"./index-f8c59545.js";import{N as T}from"./NewProductsComponent-bfde380b.js";const{VITE_API:_,VITE_PATH:p}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-live-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={components:{NewProductsComponent:T},computed:{...g(i,["carts","cartTotal"])},methods:{...f(i,["getCarts"]),changeQty(e,n){console.log(n.target.value);const r={product_id:e,qty:Number(n.target.value)};console.log(r),this.$http.put(`${_}api/${p}/cart/${e}`,{data:r}).then(c=>{alert("已更改數量"),this.getCarts()}).catch(c=>{alert("無法更改數量")})},delCartItem(e){this.$http.delete(`${_}api/${p}/cart/${e}`).then(()=>{this.getCarts()}).catch(()=>{alert("無法刪除購物車內容")})}},mounted(){this.getCarts()}},w={class:"w-full table-fixed text-center mb-6"},N=t("thead",null,[t("tr",{class:"font-extrabold text-4.5"},[t("th"),t("th",null,"產品"),t("th",null,"價錢"),t("th",null,"數量"),t("th",null,"小計"),t("th",null,"刪除")])],-1),E={class:"hover:bg-fog-200"},I={class:"lg:w-24 lg:h-24"},V=["src","alt"],P={class:"text-xs"},A={class:"text-xs"},S=["value","onChange"],R={class:"text-xs"},B=["onClick"],D={class:"border-t border-t-fog-500 border-spacing-1"},L={class:""},q={colspan:"3",class:"text-end"},F={key:0,class:"inline-block px-2 bg-fog-200"},H=t("td",{class:""},"總計:",-1),O={class:"text-xs"},Q={key:0,colspan:"5"},U=t("button",{type:"button",class:"py-2 px-12 bg-secondary rounded-lg2 text-white flex ml-auto mt-4 hover:bg-primary hover:text-dark"},"結帳",-1);function M(e,n,r,c,j,d){const m=b("RouterLink");return o(),a("table",w,[N,t("tbody",null,[(o(!0),a(C,null,y(e.carts,s=>(o(),a("tr",E,[t("td",I,[t("img",{src:s.product.imageUrl,alt:s.product.title,class:"w-20"},null,8,V)]),t("td",null,l(s.product.title),1),t("td",P,"NT $ "+l(s.product.price),1),t("td",A,[t("input",{type:"number",min:"1",value:s.qty,class:"w-full text-xs ml-2 text-center border-none rounded-md bg-transparent md:mx-1 md:py-1 md:w-20 md:pl-2 md:bg-fog-200",onChange:h=>d.changeQty(s.id,h)},null,40,S)]),t("td",R,"NT $ "+l(s.final_total),1),t("td",null,[t("button",{type:"button",class:"hover:text-highlight",onClick:h=>d.delCartItem(s.id)}," x ",8,B)])]))),256))]),t("tfoot",D,[t("tr",L,[t("td",q,[e.cartTotal>=900?(o(),a("p",F,"已達免運費門檻")):u("",!0)]),H,t("td",O,"NT$ "+l(e.cartTotal),1)]),t("tr",null,[e.$route.fullPath!="/placeorder"?(o(),a("td",Q,[$(m,{to:"/placeorder"},{default:v(()=>[U]),_:1})])):u("",!0)])])])}const K=x(k,[["render",M]]);export{K as C};
