import{s as i,u as o}from"./index-1a926d7a.js";const{VITE_API:e,VITE_PATH:r}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-live-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},c=i("adminStore",{state:()=>({products:[],productsPagination:{},orders:[],orderPagination:{}}),actions:{async checkLogin(){const a=document.cookie.replace(/(?:(?:^|.*;\s*)goldenToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");return o.defaults.headers.common.Authorization=a,await(async()=>{try{const s=await o.post(`${e}api/user/check`);return this.router.push("/admin"),!0}catch{return this.router.push("/admin/login"),!1}})()},async getProducts(a=1){await o.get(`${e}api/${r}/admin/products?page=${a}`).then(t=>{this.products=t.data.products,this.productsPagination=t.data.pagination,this.router.push(`/admin/products/${t.data.pagination.current_page}`)}).catch(t=>{alert("取得產品列表發生錯誤")})},getOrders(a=1){o.get(`${e}api/${r}/admin/orders?page=${a}`).then(t=>{this.orders=t.data.orders,this.orderPagination=t.data.pagination,this.router.push(`/admin/orders/${t.data.pagination.current_page}`)}).catch(t=>{console.log("無法取得訂單列表"),console.log(t)})}}});export{c as a};
