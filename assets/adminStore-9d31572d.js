import{u as n,x as e}from"./index-63941f38.js";import{S as s}from"./sweetalert2.all-2a6e8b79.js";const{VITE_API:i,VITE_PATH:o}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-live-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g=n("adminStore",{state:()=>({products:[],productsPagination:{},orders:[],orderPagination:{},isLoading:!1,fullPage:!0}),actions:{changeLoading(t){this.isLoading=t},async checkLogin(t="/admin"){const a=document.cookie.replace(/(?:(?:^|.*;\s*)goldenToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");return e.defaults.headers.common.Authorization=a,await(async()=>{try{const r=await e.post(`${i}api/user/check`);return this.router.push(t),!0}catch{return this.router.push("/admin/login"),!1}})()},async getProducts(t=1){this.isLoading=!0,await e.get(`${i}api/${o}/admin/products?page=${t}`).then(a=>{this.products=a.data.products,this.productsPagination=a.data.pagination,this.router.push(`/admin/products/${a.data.pagination.current_page}`),this.isLoading=!1}).catch(a=>{this.isLoading=!1,alert("取得產品列表發生錯誤")})},getOrders(t=1){this.isLoading=!0,e.get(`${i}api/${o}/admin/orders?page=${t}`).then(a=>{this.orders=a.data.orders,this.orderPagination=a.data.pagination,this.router.push(`/admin/orders/${a.data.pagination.current_page}`),this.isLoading=!1}).catch(a=>{this.isLoading=!1,alertMessage("無法取得訂單列表")})},async confirmMessage(t){return await s.fire({text:t,confirmButtonText:"確定"})},alertMessage(t){s.fire({text:t,timer:1e3})},toastMessge(t,a="top-end"){s.fire({toast:!0,position:a,icon:"success",title:t,showConfirmButton:!1,timer:1e3})}}});export{g as a};
