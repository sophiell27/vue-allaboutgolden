import{f as u}from"./frontStore-21f3ff23.js";import{m as g,a as f,_ as x,r as b,o as s,c as a,b as t,F as C,j as y,t as l,l as i,d as $,w as v}from"./index-1a926d7a.js";import{N as T}from"./NewProductsComponent-ddcf1d25.js";const{VITE_API:_,VITE_PATH:p}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-live-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={components:{NewProductsComponent:T},computed:{...g(u,["carts","cartTotal"])},methods:{...f(u,["getCarts"]),changeQty(e,n){console.log(n.target.value);const r={product_id:e,qty:Number(n.target.value)};console.log(r),this.$http.put(`${_}api/${p}/cart/${e}`,{data:r}).then(c=>{alert("已更改數量"),this.getCarts()}).catch(c=>{alert("無法更改數量")})},delCartItem(e){this.$http.delete(`${_}api/${p}/cart/${e}`).then(()=>{this.getCarts()}).catch(()=>{alert("無法刪除購物車內容")})}},mounted(){this.getCarts()}},w={class:"w-full table-fixed text-center mb-6"},N=t("thead",null,[t("tr",{class:"font-extrabold text-4.5"},[t("th"),t("th",null,"產品"),t("th",null,"價錢"),t("th",null,"數量"),t("th",null,"小計"),t("th",null,"刪除")])],-1),E={class:"lg:w-24 lg:h-24"},I=["src","alt"],V={class:"text-xs"},P={class:"text-xs"},A=["value","onChange"],S={class:"text-xs"},R=["onClick"],B={class:"border-t border-t-fog-500 border-spacing-1"},D={class:""},L={colspan:"3",class:"text-end"},q={key:0,class:"inline-block px-2 bg-fog-200"},F=t("td",{class:""},"總計:",-1),H={class:"text-xs"},O={key:0,colspan:"5"},Q=t("button",{type:"button",class:"py-2 px-12 bg-secondary rounded-lg2 text-white flex ml-auto mt-4 hover:bg-primary hover:text-dark"},"結帳",-1);function U(e,n,r,c,j,d){const m=b("RouterLink");return s(),a("table",w,[N,t("tbody",null,[(s(!0),a(C,null,y(e.carts,o=>(s(),a("tr",null,[t("td",E,[t("img",{src:o.product.imageUrl,alt:o.product.title,class:"w-20"},null,8,I)]),t("td",null,l(o.product.title),1),t("td",V,"NT $ "+l(o.product.price),1),t("td",P,[t("input",{type:"number",min:"1",value:o.qty,class:"w-full text-xs ml-2 text-center border-none bg-fog-100 rounded-md md:mx-1 md:py-1 md:w-20 md:pl-2 md:bg-fog-200",onChange:h=>d.changeQty(o.id,h)},null,40,A)]),t("td",S,"NT $ "+l(o.final_total),1),t("td",null,[t("button",{type:"button",class:"hover:text-highlight",onClick:h=>d.delCartItem(o.id)}," x ",8,R)])]))),256))]),t("tfoot",B,[t("tr",D,[t("td",L,[e.cartTotal>=900?(s(),a("p",q,"已達免運費門檻")):i("",!0)]),F,t("td",H,"NT$ "+l(e.cartTotal),1)]),t("tr",null,[e.$route.fullPath!="/placeorder"?(s(),a("td",O,[$(m,{to:"/placeorder"},{default:v(()=>[Q]),_:1})])):i("",!0)])])])}const J=x(k,[["render",U]]);export{J as C};
