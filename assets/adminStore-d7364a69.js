import{u as n,x as e}from"./index-eeac8972.js";import{S as i}from"./sweetalert2.all-12acd009.js";const{VITE_API:s,VITE_PATH:o}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-allaboutgolden/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=n("adminStore",{state:()=>({products:[],productsPagination:{},orders:[],orderPagination:{},isLoading:!1,fullPage:!0,loginStatus:!1}),actions:{changeLoading(t){this.isLoading=t},async checkLogin(t="/admin/orders/1"){const a=document.cookie.replace(/(?:(?:^|.*;\s*)goldenToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");return e.defaults.headers.common.Authorization=a,this.isLoading=!0,await e.post(`${s}api/user/check`).then(r=>(this.isLoading=!1,this.loginStatus=!0,this.router.push(t),r)).catch(()=>{this.isLoading=!1,this.router.currentRoute.value.fullPath!=="/admin/login"&&this.router.push("/admin/login")})},logOut(){e.post(`${s}logout`).then(()=>{this.loginStatus=!1,this.router.push("/admin/login"),this.toastMessage("成功登出","center")}).catch(t=>{this.alertMessage("無法登出")})},async getProducts(t=1){this.isLoading=!0,await e.get(`${s}api/${o}/admin/products?page=${t}`).then(a=>{this.products=a.data.products,this.productsPagination=a.data.pagination,this.router.push(`/admin/products/${a.data.pagination.current_page}`),this.isLoading=!1}).catch(a=>{this.isLoading=!1,this.alertMessage("取得產品列表發生錯誤")})},getOrders(t=1){this.isLoading=!0,e.get(`${s}api/${o}/admin/orders?page=${t}`).then(a=>{this.orders=a.data.orders,this.orderPagination=a.data.pagination,this.router.push(`/admin/orders/${a.data.pagination.current_page}`),this.isLoading=!1}).catch(a=>{this.isLoading=!1,this.alertMessage("無法取得訂單列表")})},async confirmMessage(t){return await i.fire({text:t,confirmButtonText:"確定"})},alertMessage(t){return i.fire({text:t,confirmButtonColor:"#ED8408",showConfirmButton:!0,confirmButtonText:"確定"})},toastMessage(t,a="top-end"){i.fire({toast:!0,position:a,icon:"success",title:t,showConfirmButton:!1,timer:1e3})}}});export{h as a};
