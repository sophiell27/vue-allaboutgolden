import{s as l,u as o}from"./index-1a926d7a.js";const{VITE_API:a,VITE_PATH:s}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"sophiee22",BASE_URL:"/vue-live-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=l("frontStore",{state:()=>({products:[],tempProduct:{},carts:[],filterProducts:[]}),getters:{cartTotal:({carts:t})=>t.reduce((r,e)=>r+e.final_total,0),cartlength:({carts:t})=>t.length},actions:{async getProducts(){await o.get(`${a}api/${s}/products/all`).then(t=>{this.products=t.data.products}).catch(t=>{alert("無法取得產品列表")})},getSingleProduct(t){o.get(`${a}api/${s}/product/${t}`).then(r=>{this.tempProduct=r.data.product}).catch(r=>{alert("取得商品資訊發生錯誤"),this.router.push("/products")})},getCarts(){o.get(`${a}api/${s}/cart`).then(t=>{this.carts=t.data.data.carts}).catch(()=>{alert("無法取得產品列表")})},addCart(t,r=1){let e="post",c=`${a}api/${s}/cart`;t.qty&&(e="put",c=`${a}api/${s}/cart/${t.id}`,r+=t.qty);const i={product_id:t.id,qty:r};o[e](c,{data:i}).then(d=>{alert("已加入購物車！"),this.getCarts()}).catch(d=>{alert("加入購物車發生錯誤")})},emptyCart(){o.delete(`${a}api/${s}/carts`).then(t=>{alert("已清空購物車"),this.getCarts()}).catch(t=>{alert("無法清空購物車")})},async filterProductList(t=""){var e;(e=this.products)!=null&&e.length||await this.getProducts();const r=this.products.filter(c=>{if(c.category==t)return c});return this.filterProducts=r,r}}});export{h as f};
